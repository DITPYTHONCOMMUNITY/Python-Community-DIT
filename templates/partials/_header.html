{% load static wagtailcore_tags %}
<header class="navbar rounded-full shadow-md py-4 mx-auto sticky top-4 z-50 max-w-screen-2xl transition-all duration-300 backdrop-blur-md bg-opacity-80"
        id="header">
    <div class="container mx-auto flex justify-between items-center px-4">
        <div class="flex-1 p-2 rounded-full">
            <a href="{% url 'wagtail_serve' '' %}">
                <img src="{% static 'images/logo/dit-logo.png' %}"
                     alt="Logo"
                     class="w-12 h-12 rounded-full">
            </a>
        </div>
        <nav class="hidden md:flex space-x-6 items-center">
            <a href="{% url 'wagtail_serve' '' %}"
               class="hover:bg-base-100 rounded-full shadow-md px-3 py-2">Home</a>
            <a href="/events"
               class="hover:bg-base-100 rounded-full shadow-md px-3 py-2">Events</a>
            <a href="#" class="hover:bg-base-100 rounded-full shadow-md px-3 py-2">Code of Conduct</a>
            <!-- Theme Toggle Button -->
            <button id="theme-toggle" class="btn btn-ghost btn-square">
                <svg id="theme-toggle-icon"
                     class="h-6 w-6"
                     fill="none"
                     viewBox="0 0 24 24"
                     stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                </svg>
            </button>
        </nav>
        <div class="md:hidden flex items-center space-x-2">
            <!-- Theme Toggle Button for Mobile -->
            <button id="theme-toggle-mobile" class="btn btn-ghost btn-square">
                <svg id="theme-toggle-icon-mobile"
                     class="h-6 w-6"
                     fill="none"
                     viewBox="0 0 24 24"
                     stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                </svg>
            </button>
            <!-- Mobile Menu Button -->
            <label for="mobile-drawer" class="btn btn-ghost btn-square">
                <svg xmlns="http://www.w3.org/2000/svg"
                     class="h-6 w-6"
                     fill="none"
                     viewBox="0 0 24 24"
                     stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            </label>
        </div>
    </div>
</header>
<!-- Drawer for Mobile Menu -->
<input type="checkbox" id="mobile-drawer" class="drawer-toggle" />
<div class="drawer-side z-50">
    <label for="mobile-drawer" class="drawer-overlay"></label>
    <ul class="menu p-4 w-64 bg-base-100 text-base-content h-full">
        <li>
            <a href="{% url 'wagtail_serve' '' %}" class="hover:text-primary">Home</a>
        </li>
        <li>
            <a href="/events"
               class="hover:bg-base-100 rounded-full shadow-md px-3 py-2">Events</a>
        </li>
        <li>
            <a href="#" class="hover:text-primary">Code of Conduct</a>
        </li>
    </ul>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const htmlElement = document.documentElement;
        const themeToggleBtn = document.getElementById('theme-toggle');
        const themeToggleBtnMobile = document.getElementById('theme-toggle-mobile');
        const themeToggleIcon = document.getElementById('theme-toggle-icon');
        const themeToggleIconMobile = document.getElementById('theme-toggle-icon-mobile');

        const sunIcon = `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />`;
        const moonIcon = `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />`;

        const savedTheme = localStorage.getItem('theme') || 'light';
        htmlElement.setAttribute('data-theme', savedTheme);
        updateThemeIcon(savedTheme);

        function updateThemeIcon(theme) {
            const icon = theme === 'light' ? sunIcon : moonIcon;
            themeToggleIcon.innerHTML = icon;
            themeToggleIconMobile.innerHTML = icon;
        }

        function toggleTheme() {
            const currentTheme = htmlElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            htmlElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeIcon(newTheme);
        }

        themeToggleBtn.addEventListener('click', toggleTheme);
        themeToggleBtnMobile.addEventListener('click', toggleTheme);
    });
</script>
<script>
    document.addEventListener('scroll', function () {
        const header = document.getElementById('header');
        if (window.scrollY > 50) {
            header.classList.add('bg-opacity-90', 'shadow-lg');
            header.classList.remove('bg-base-300');
        } else {
            header.classList.remove('bg-opacity-90', 'shadow-lg');
            header.classList.add('bg-base-300');
        }
    });
</script>
